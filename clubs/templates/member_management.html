{% extends 'base_content.html' %}
{% block content %}
<div class="container">
  <div class="row justify-content-between">
    <h1 class="col-5">
Member management
</h1>
  </div>
</div>
<div class="container">
  <div class="accordion">
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Members
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          <div class="d-grid gap-2">
            <tr>
              <td>
                <div class="row">
                  <div class="col-12">
                    {%if member_count == False%}
                    <table class="table table-striped table-hover cellspacing="0" ">
                      <thead>
                        <th scope="col"></th>
                        <th scope="col">Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Experience level</th>
                        <th scope="col">Statement</th>
                      </thead>
                      {% for member in members %}
                      <tr>
                        <td>
                          <img src="{{ member.mini_gravatar }}" alt="Gravatar of {{ member.username }}" class="rounded-circle" >
                        </td>
                        <td class="align-middle"><a href="{% url 'show_user' user.id %}">{{member.full_name}}</td>
                          <td class="align-middle"> {{member.username}}</td>
                          <td class="align-middle"> {{member.get_chess_experience}}</td>
                          <td class="align-middle"> {{member.bio}}</td>
                          <td class="align-middle">
                            <form action = "{% url 'ban_member' current_club.club_name member.id %}" method="post">
                              {% csrf_token %}
                              <input type="submit" class="btn btn-outline-danger" value="Ban" name="ban-btn"/>
                            </form>
                          </td>
                          <td class="align-middle">
                            <form action = "{% url 'promote_member' current_club.club_name member.id %}" method="post">
                              {% csrf_token %}
                              <input type="submit" class="btn btn-outline-success" value="Promote" name="promote-btn"/>
                            </form>
                          </td>
                        </tr>
                        {%endfor%}
                      </table>
                      {%endif%}
                      {%if member_is_empty%}
                      <div class="alert alert-warning" role="alert">
                        <h5 class="alert-heading">There are currently no users with member role.</h5>
                      </div>
                      {%endif%}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingTwo"><font size="+2">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                Banned users
              </button>
              </font>
            </h2>
            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
              <div class="accordion-body">
                <div class="d-grid gap-2">
                  <tr>
                    <td>
                      <div class="row">
                        <div class="col-12">
                          {%if banned_is_empty == False%}
                          <table class="table table-striped table-hover cellspacing="0" ">
                            <thead>
                              <th scope="col"></th>
                              <th scope="col">Name</th>
                              <th scope="col">Email</th>
                              <th scope="col">Experience level</th>
                              <th scope="col">Statement</th>
                            </thead>
                            {% for member in banned %}
                            <tr>
                              <td>
                                <img src="{{ member.mini_gravatar }}" alt="Gravatar of {{ member.username }}" class="rounded-circle" >
                              </td>
                              <td class="align-middle"><a href="{% url 'show_user' user.id %}">{{member.full_name}}</td>
                                <td class="align-middle"> {{member.username}}</td>
                                <td class="align-middle"> {{member.get_chess_experience}}</td>
                                <td class="align-middle"> {{member.bio}}</td>
                                <td class="align-middle">
                                  <form action = "{% url 'unban_member' current_club.club_name member.id %}" method="post">
                                    {% csrf_token %}
                                    <input type="submit" class="btn btn-outline-warning" value="Remove ban" name="unban-btn"/>
                                  </form>
                                </td>
                              </tr>
                              {%endfor%}
                            </table>
                            {%endif%}
                            {%if banned_is_empty%}
                            <div class="alert alert-warning" role="alert">
                              <h5 class="alert-heading">No banned users.</h5>
                            </div>
                            {%endif%}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
      {%endblock%}
